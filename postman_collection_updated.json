{
  "info": {
    "name": "FitAI Backend API - Complete Flow (Updated)",
    "description": "Complete API collection for FitAI fitness and nutrition backend with AI-powered plan generation, automatic workout/meal creation, and plan modification capabilities",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "planId",
      "value": "",
      "type": "string"
    },
    {
      "key": "workoutId",
      "value": "",
      "type": "string"
    },
    {
      "key": "mealId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "ðŸ¥ Health & Status",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ” Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('userId', response.user._id);",
                  "    console.log('User registered successfully:', response.user._id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@fitai.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phoneNumber\": \"+1234567890\",\n  \"birthDate\": \"1990-01-01\",\n  \"password\": \"password123\",\n  \"gender\": \"male\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('userId', response.user._id);",
                  "    console.log('User logged in successfully:', response.user._id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@fitai.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸŽ¯ Fitness Profile Setup",
      "item": [
        {
          "name": "Setup Fitness Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    console.log('Fitness profile setup completed successfully');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fitnessGoal\": \"weight_loss\",\n  \"trainingLevel\": \"beginner\",\n  \"planDuration\": 8,\n  \"focusAreas\": [\"strength\", \"cardio\", \"endurance\"],\n  \"equipmentAvailable\": [\"dumbbells\", \"resistance_bands\", \"yoga_mat\"],\n  \"gender\": \"male\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/profile/setup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profile", "setup"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ¤– AI Services & Plan Management",
      "item": [
        {
          "name": "Generate AI Plan",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('planId', response.data._id);",
                  "    console.log('AI Plan generated successfully:', response.data._id);",
                  "    console.log('Plan Status:', response.data.status);",
                  "    console.log('Plan Goal:', response.data.goal);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/generate-plan",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "generate-plan"]
            }
          }
        },
        {
          "name": "Get My Plan",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/my-plan",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "my-plan"]
            }
          }
        },
        {
          "name": "Get All Plans",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/plans",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "plans"]
            }
          }
        },
        {
          "name": "Confirm Plan (Auto-Create Workouts & Meals)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Plan confirmed and activated successfully');",
                  "    console.log('Workouts created:', response.data.activationDetails.workoutsCreated);",
                  "    console.log('Meals created:', response.data.activationDetails.mealsCreated);",
                  "    console.log('Start date:', response.data.activationDetails.startDate);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/confirm-plan/{{planId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "confirm-plan", "{{planId}}"]
            }
          }
        },
        {
          "name": "Get User Schedule (7 days)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Schedule retrieved successfully');",
                  "    console.log('Total workouts:', response.data.summary.totalWorkouts);",
                  "    console.log('Total meals:', response.data.summary.totalMeals);",
                  "    console.log('Days requested:', response.data.summary.daysRequested);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/schedule?days=7",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "schedule"],
              "query": [
                {
                  "key": "days",
                  "value": "7"
                }
              ]
            }
          }
        },
        {
          "name": "Get User Schedule (14 days)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/schedule?days=14",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "schedule"],
              "query": [
                {
                  "key": "days",
                  "value": "14"
                }
              ]
            }
          }
        },
        {
          "name": "Modify Plan - Workout Only",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Plan modified successfully');",
                  "    console.log('Workouts updated:', response.data.modifications.workouts.updated);",
                  "    console.log('Workouts created:', response.data.modifications.workouts.created);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"modifications\": {\n    \"workouts\": [\n      {\n        \"weekNumber\": 1,\n        \"dayNumber\": 1,\n        \"exercises\": [\n          {\n            \"name\": \"Modified Push-ups\",\n            \"sets\": 4,\n            \"reps\": \"10-15\",\n            \"rest_seconds\": 90,\n            \"muscle_groups\": [\"chest\", \"triceps\", \"shoulders\"]\n          },\n          {\n            \"name\": \"Modified Squats\",\n            \"sets\": 3,\n            \"reps\": \"15-20\",\n            \"rest_seconds\": 60,\n            \"muscle_groups\": [\"quadriceps\", \"glutes\", \"hamstrings\"]\n          }\n        ]\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/modify-plan/{{planId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "modify-plan", "{{planId}}"]
            }
          }
        },
        {
          "name": "Modify Plan - Meal Only",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Plan modified successfully');",
                  "    console.log('Meals updated:', response.data.modifications.meals.updated);",
                  "    console.log('Meals created:', response.data.modifications.meals.created);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"modifications\": {\n    \"meals\": [\n      {\n        \"weekNumber\": 1,\n        \"dayNumber\": 1,\n        \"mealType\": \"breakfast\",\n        \"mealData\": {\n          \"name\": \"Modified Protein Bowl\",\n          \"calories\": 450,\n          \"protein\": 25,\n          \"carbs\": 55,\n          \"fats\": 18,\n          \"ingredients\": [\"oats\", \"protein powder\", \"banana\", \"almonds\", \"honey\"],\n          \"prep_time_minutes\": 8,\n          \"instructions\": \"Mix all ingredients in a bowl and enjoy!\"\n        }\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/modify-plan/{{planId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "modify-plan", "{{planId}}"]
            }
          }
        },
        {
          "name": "Modify Plan - Both Workout and Meal",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Plan modified successfully');",
                  "    console.log('Total workouts modified:', response.data.summary.totalWorkoutsModified);",
                  "    console.log('Total meals modified:', response.data.summary.totalMealsModified);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"modifications\": {\n    \"workouts\": [\n      {\n        \"weekNumber\": 1,\n        \"dayNumber\": 2,\n        \"exercises\": [\n          {\n            \"name\": \"Cardio Session\",\n            \"sets\": 1,\n            \"reps\": \"30 minutes\",\n            \"rest_seconds\": 0,\n            \"muscle_groups\": [\"cardio\", \"endurance\"]\n          }\n        ]\n      }\n    ],\n    \"meals\": [\n      {\n        \"weekNumber\": 1,\n        \"dayNumber\": 2,\n        \"mealType\": \"lunch\",\n        \"mealData\": {\n          \"name\": \"High Protein Lunch\",\n          \"calories\": 550,\n          \"protein\": 40,\n          \"carbs\": 45,\n          \"fats\": 20,\n          \"ingredients\": [\"chicken breast\", \"quinoa\", \"broccoli\", \"olive oil\"],\n          \"prep_time_minutes\": 25,\n          \"instructions\": \"Grill chicken, cook quinoa, steam broccoli\"\n        }\n      }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/modify-plan/{{planId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "modify-plan", "{{planId}}"]
            }
          }
        },
        {
          "name": "Get Plan History",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('Plan history retrieved successfully');",
                  "    console.log('Total weeks:', response.data.summary.totalWeeks);",
                  "    console.log('Total workouts:', response.data.summary.totalWorkouts);",
                  "    console.log('Total meals:', response.data.summary.totalMeals);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/modify-plan/{{planId}}/history",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "modify-plan", "{{planId}}", "history"]
            }
          }
        },
        {
          "name": "Chat with AI - General Question",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"plan_id\": \"{{planId}}\",\n  \"message\": \"How can I modify this workout for beginners?\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/chat",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "chat"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ‹ï¸ Workout Management",
      "item": [
        {
          "name": "Get Daily Workout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('workoutId', response.data._id);",
                  "    console.log('Daily workout retrieved:', response.data._id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/workouts/daily/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "workouts", "daily", "1"]
            }
          }
        },
        {
          "name": "Start Workout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/workouts/start/{{workoutId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "workouts", "start", "{{workoutId}}"]
            }
          }
        },
        {
          "name": "Complete Workout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"total_duration_minutes\": 45,\n  \"calories_burned\": 350,\n  \"difficulty_rating\": 7,\n  \"notes\": \"Great workout session!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/workouts/complete/{{workoutId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "workouts", "complete", "{{workoutId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ½ï¸ Meal Management",
      "item": [
        {
          "name": "Get Daily Meals",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.collectionVariables.set('mealId', response.data[0]._id);",
                  "        console.log('Daily meals retrieved, first meal ID:', response.data[0]._id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/meals/daily/1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "meals", "daily", "1"]
            }
          }
        },
        {
          "name": "Prepare Meal",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/v1/meals/prepare/{{mealId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "meals", "prepare", "{{mealId}}"]
            }
          }
        },
        {
          "name": "Consume Meal",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"calories_consumed\": 450,\n  \"protein_consumed\": 35,\n  \"carbs_consumed\": 45,\n  \"fats_consumed\": 20,\n  \"portion_eaten\": 100,\n  \"notes\": \"Delicious meal!\",\n  \"rating\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/meals/consume/{{mealId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "meals", "consume", "{{mealId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ§ª Test Scenarios",
      "item": [
        {
          "name": "Complete User Journey - Weight Loss",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// This simulates a complete user journey for weight loss",
                  "console.log('Starting complete user journey test...');"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"weightloss@fitai.com\",\n  \"firstName\": \"Sarah\",\n  \"lastName\": \"Johnson\",\n  \"phoneNumber\": \"+1234567892\",\n  \"birthDate\": \"1985-06-15\",\n  \"password\": \"password123\",\n  \"gender\": \"female\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Error Handling - Invalid Plan ID",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"plan_id\": \"invalid_plan_id\",\n  \"message\": \"This should fail\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/ai/chat",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v1", "ai", "chat"]
            }
          }
        }
      ]
    }
  ]
} 